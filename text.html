<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WhatsApp Clone</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <script src="https://unpkg.com/html5-qrcode/minified/html5-qrcode.min.js"></script>
    <style>
        /* Your existing styles here */
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #121212;
            margin: 0;
            overflow: hidden;
        }

        #M {
            border: 2px solid black;
            height: 90vh;
            width: 90%;
            max-width: 400px;
            border-radius: 12px;
            background: black;
            overflow-y: auto;
            display: block;
        }

        #M::-webkit-scrollbar {
            display: none;
        }

        #top {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background: #1f1f1f;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        span {
            font-size: 24px;
            color: white;
            font-weight: bold;
        }

        .st {
            margin-left: 10px;
            cursor: pointer;
            color: white;
        }

        #body_scrol {
            display: flex;
            align-items: center;
            background: #363030;
            border-radius: 17px;
            margin: 10px;
            padding: 8px;
        }

        #body_scrol input {
            border: none;
            outline: none;
            font-size: 16px;
            background: transparent;
            color: white;
            flex: 1;
            padding-left: 10px;
        }

        .Search {
            color: #949191;
        }

        ul {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            overflow-x: auto;
        }

        li {
            color: #ffffff;
            list-style-type: none;
            background: #363030;
            padding: 7px;
            margin: 0 5px;
            border-radius: 10px;
            cursor: pointer;
            white-space: nowrap;
        }

        #Archived {
            padding: 10px;
            color: white;
        }

        .contect {
            display: flex;
            align-items: center;
            padding: 10px;
            cursor: pointer;
        }

        .profile {
            height: 45px;
            width: 45px;
            border-radius: 50%;
            overflow: hidden;
        }

        .profile img {
            width: 100%;
        }

        .name {
            color: white;
            font-size: 15px;
            margin-left: 10px;
            flex: 1;
        }

        .contect small {
            color: white;
        }

        footer {
            width: 100%;
            background-color: rgb(4, 0, 0);
            position: fixed;
            bottom: 0;
            left: 0;
            display: flex;
            justify-content: space-around;
            padding: 10px 0;
            z-index: 100;
        }

        footer i {
            font-size: 24px;
            color: #f8f2f2;
            cursor: pointer;
        }

        footer i:hover {
            color: #25d366;
        }

        /* Chat container styles */
        #chatContainer {
            display: none;
            background-color: #121212;
            padding: 20px;
            height: 80vh;
            width: 90%;
            max-width: 400px;
            border-radius: 12px;
            margin: 0 auto;
        }

        #chatContainer .header {
            display: flex;
            justify-content: space-between;
            padding-bottom: 10px;
            align-items: center;
        }

        #chatContainer .profile {
            height: 45px;
            width: 45px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 10px;
        }

        #chatContainer .profile img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        #chatContainer #chatContactName {
            color: white;
            font-size: 16px;
            font-weight: bold;
        }

        #chatContainer .messages {
            max-height: 70vh;
            overflow-y: auto;
            margin-bottom: 10px;
            color: white;
        }

        #chatContainer .message {
            margin-bottom: 10px;
        }

        #chatContainer input {
            width: 100%;
            padding: 10px;
            border-radius: 5px;
            border: none;
            background-color: #363030;
            color: white;
        }

        /* Back button styles */
        .back-button {
            background-color: transparent;
            color: #25d366;
            font-size: 18px;
            font-weight: bold;
            border: none;
            cursor: pointer;
        }

        .back-button:hover {
            color: #1db954;
        }

        @media (max-width: 768px) {
            #M {
                width: 100%;
                height: 100vh;
                border-radius: 0;
            }
        }
    </style>
</head>
<body>
    <div id="M">
        <div id="top">
            <span>WhatsApp</span>
            <div>
                <i class="bi bi-qr-code-scan st"></i>
                <i class="bi bi-camera st"></i>
                <i class="bi bi-three-dots-vertical st"></i>
            </div>
        </div>
        <div id="body_scrol">
            <input type="text" placeholder="Ask Meta AI or Search" id="search-input">
        </div>
        <ul>
            <li>All</li>
            <li>Unread</li>
            <li>Favorites</li>
            <li>Groups</li>
            <li><i class="bi bi-plus" style="color:white;"></i></li>
        </ul>
        <div id="Archived">
            <i class="bi bi-arrow-down-square"></i>&nbsp;&nbsp;
            <big>Archived</big>
        </div>

        <div class="contect" data-contact="Aarav Sharma" data-img="g1.jpg">
            <div class="profile"><img src="g1.jpg" alt="Aarav Sharma"></div>
            <h4 class="name">Aarav Sharma</h4>
            <small>6:18 PM</small>
        </div>
        <div class="contect" data-contact="Ananya Patel" data-img="g2.jpg">
            <div class="profile"><img src="g2.jpg" alt="Ananya Patel"></div>
            <h4 class="name">Ananya Patel</h4>
            <small>9:03 PM</small>
        </div>
    </div>

    <div id="chatContainer">
        <div class="header">
            <button id="backButton" class="back-button"><i class="bi bi-arrow-left-short"></i></button>
            <div class="profile">
                <img src="" id="chatProfile" alt="Profile">
            </div>
            <div id="chatContactName"></div>
        </div>
        <div class="messages" id="chatMessages"></div>
        <input type="text" placeholder="Type a message..." id="chatInput">
    </div>

    <footer>
        <i class="bi bi-chat-right-text-fill" id="home-icon"></i>
        <i class="bi bi-broadcast" id="broadcast-icon"></i>
        <i class="bi bi-person" id="contacts-icon"></i>
        <i class="bi bi-telephone" id="calls-icon"></i>
    </footer>

    <script>
        const contacts = document.querySelectorAll('.contect');
        const chatContainer = document.getElementById('chatContainer');
        const chatProfile = document.getElementById('chatProfile');
        const chatContactName = document.getElementById('chatContactName');
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const contactsSection = document.getElementById('M');  // The contact list container
        const backButton = document.getElementById('backButton');
        
        let currentContact = null;

        // Function to load chat messages from local storage
        const loadChatMessages = (contactName) => {
            const messages = JSON.parse(localStorage.getItem(contactName)) || [];
            chatMessages.innerHTML = messages.map(message => `
                <div class="message"><strong>${message.sender}:</strong> ${message.text}</div>
            `).join('');
        };

        // Function to save a new message to local storage
        const saveChatMessage = (contactName, message) => {
            const messages = JSON.parse(localStorage.getItem(contactName)) || [];
            messages.push(message);
            localStorage.setItem(contactName, JSON.stringify(messages));
        };

        contacts.forEach(contact => {
            contact.addEventListener('click', () => {
                const contactName = contact.dataset.contact;
                const contactImg = contact.querySelector('img').src;

                // Hide the contact list section
                contactsSection.style.display = 'none';

                // Set chat profile image and name
                chatProfile.src = contactImg;
                chatContactName.textContent = contactName;

                // Show the chat container
                chatContainer.style.display = 'block';

                // Load previous chat messages from local storage
                loadChatMessages(contactName);

                // Set the current contact for message saving
                currentContact = contactName;
            });
        });

        chatInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && chatInput.value.trim() !== '') {
                const messageText = chatInput.value.trim();
                const newMessage = { sender: 'You', text: messageText };

                // Save the new message to local storage
                saveChatMessage(currentContact, newMessage);

                // Display the new message in the chat window
                const messageElement = document.createElement('div');
                messageElement.classList.add('message');
                messageElement.innerHTML = `<strong>You:</strong> ${messageText}`;
                chatMessages.appendChild(messageElement);

                // Clear the input field
                chatInput.value = '';
            }
        });

        // Back button event listener
        backButton.addEventListener('click', () => {
            // Hide the chat container
            chatContainer.style.display = 'none';

            // Show the contact list again
            contactsSection.style.display = 'block';
        });
    </script>
</body>
</html>
